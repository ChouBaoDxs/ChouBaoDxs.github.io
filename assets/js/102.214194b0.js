(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{998:function(_,v,t){"use strict";t.r(v);var d=t(12),l=Object(d.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[_._v("B 站地址：https://www.bilibili.com/video/BV1UZ4y167B4"),t("br"),_._v("\n视频名称：【游戏开发】腾讯内部技术-任务系统的架构与设计"),t("br"),_._v("\nup："),t("a",{attrs:{href:"https://space.bilibili.com/351545447",target:"_blank",rel:"noopener noreferrer"}},[_._v("博毅创为"),t("OutboundLink")],1),_._v("，大量游戏开发教程")]),_._v(" "),t("p",[_._v("本节课题：腾讯内部技术：《轩辕传奇》的任务系统的架构与设计")]),_._v(" "),t("p",[_._v("课程内容：")]),_._v(" "),t("ol",[t("li",[_._v("任务系统的需求分析")]),_._v(" "),t("li",[_._v("制定任务的配置表与条件规则配置表")]),_._v(" "),t("li",[_._v("任务系统的触发与推进")]),_._v(" "),t("li",[_._v("任务奖励的领取")])]),_._v(" "),t("p",[_._v("我的评价：★★★☆☆")])]),_._v(" "),t("p",[_._v("[TOC]")]),_._v(" "),t("h2",{attrs:{id:"_1-任务系统的需求分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-任务系统的需求分析"}},[_._v("#")]),_._v(" 1. 任务系统的需求分析")]),_._v(" "),t("p",[_._v("需求：")]),_._v(" "),t("ol",[t("li",[_._v("要提供一种模式给策划，能够编辑游戏任务")]),_._v(" "),t("li",[_._v("任务要动态解锁给玩家")]),_._v(" "),t("li",[_._v("能够检测任务是否完成")]),_._v(" "),t("li",[_._v("任务完成之后可以获取什么奖励")]),_._v(" "),t("li",[_._v("如何领取奖励")])]),_._v(" "),t("h2",{attrs:{id:"_2-制定任务的配置表与条件规则配置表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-制定任务的配置表与条件规则配置表"}},[_._v("#")]),_._v(" 2. 制定任务的配置表与条件规则配置表")]),_._v(" "),t("p",[t("strong",[_._v("任务配置表")])]),_._v(" "),t("p",[_._v("任务需要区分任务类型，比如按 id 区分：10001，10002，10003 和 20001，20002，20003 就是两种任务类型")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("任务类型ID")]),_._v(" "),t("th",[_._v("任务的描述")]),_._v(" "),t("th",[_._v("完成任务所获得奖励描述")]),_._v(" "),t("th",[_._v("解锁任务条件")]),_._v(" "),t("th",[_._v("任务的完成条件")]),_._v(" "),t("th",[_._v("任务的奖励")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("10001")]),_._v(" "),t("td",[_._v("达到10级解锁，收集一本书")]),_._v(" "),t("td",[_._v("获得10个金币")]),_._v(" "),t("td",[_._v("type=10000&ulevel=10")]),_._v(" "),t("td",[_._v("type=10000&ubook=1")]),_._v(" "),t("td",[_._v("type=10000&uchip=%d")])]),_._v(" "),t("tr",[t("td",[_._v("10002")]),_._v(" "),t("td",[_._v("达到20级解锁，收集一个宝石")]),_._v(" "),t("td",[_._v("获得10个宝石")]),_._v(" "),t("td",[_._v("type=10000&ulevel=20")]),_._v(" "),t("td",[_._v("type=10001&udamind=1")]),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("20001")]),_._v(" "),t("td",[_._v("收集10个卡片")]),_._v(" "),t("td",[_._v("获得好的xxx装备")]),_._v(" "),t("td",[_._v("type=20000&ucard=10")]),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("20002")]),_._v(" "),t("td",[_._v("收集20个卡片")]),_._v(" "),t("td",[_._v("获得好的xxxx装备")]),_._v(" "),t("td",[_._v("type=20000&ucard=20")]),_._v(" "),t("td"),_._v(" "),t("td")])])]),_._v(" "),t("p",[t("strong",[_._v("条件规则配置表")])]),_._v(" "),t("ul",[t("li",[_._v("解锁任务条件规则表\n"),t("table",[t("thead",[t("tr",[t("th",[_._v("规则ID")]),_._v(" "),t("th",[_._v("解锁任务的描述")]),_._v(" "),t("th",[_._v("规则(告诉策划如何填写，定义程序如何解析)")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("10000")]),_._v(" "),t("td",[_._v("达到%d等级可以解锁")]),_._v(" "),t("td",[_._v("type=10000&ulevel=%d")])]),_._v(" "),t("tr",[t("td",[_._v("20000")]),_._v(" "),t("td",[_._v("收集%d个卡片解锁")]),_._v(" "),t("td",[_._v("type=20000&ucard=%d")])])])])]),_._v(" "),t("li",[_._v("任务的完成条件规则表\n"),t("table",[t("thead",[t("tr",[t("th",[_._v("规则ID")]),_._v(" "),t("th",[_._v("任务达成的描述")]),_._v(" "),t("th",[_._v("规则")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("10000")]),_._v(" "),t("td",[_._v("收集一本书")]),_._v(" "),t("td",[_._v("type=10000&ubook=%d")])]),_._v(" "),t("tr",[t("td",[_._v("10001")]),_._v(" "),t("td",[_._v("收集一个宝石")]),_._v(" "),t("td",[_._v("type=10001&udamind=%d")])])])])]),_._v(" "),t("li",[_._v("任务的奖励规则表\n"),t("table",[t("thead",[t("tr",[t("th",[_._v("规则ID")]),_._v(" "),t("th",[_._v("奖励描述")]),_._v(" "),t("th",[_._v("规则")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("10000")]),_._v(" "),t("td",[_._v("奖励%d金币")]),_._v(" "),t("td",[_._v("type=10000&uchip=%d")])]),_._v(" "),t("tr",[t("td",[_._v("10001")]),_._v(" "),t("td",[_._v("奖励%d红")]),_._v(" "),t("td",[_._v("type=10001&hp=%d")])])])])])]),_._v(" "),t("p",[_._v("说明：策划增加一个需求，程序需要增加一个解析")]),_._v(" "),t("h2",{attrs:{id:"_3-任务系统的触发解锁与推进"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-任务系统的触发解锁与推进"}},[_._v("#")]),_._v(" 3. 任务系统的触发解锁与推进")]),_._v(" "),t("p",[_._v("单机游戏可能不需要通过网络交互，这里以网络游戏的任务系统为例。")]),_._v(" "),t("ul",[t("li",[_._v("用户创建——>解锁某些任务；")]),_._v(" "),t("li",[_._v("用户升级——>解锁某些任务；")]),_._v(" "),t("li",[_._v("游戏世界的变化——>引起任务解锁")])]),_._v(" "),t("p",[_._v("游戏中每个玩家的一些重大事件，都会抛出事件，任务系统负责监听事件，根据任务解锁条件来给玩家生成对应的任务。")]),_._v(" "),t("p",[_._v("玩家任务表：记录所有玩家正在进行中的、已经完成的所有任务。")]),_._v(" "),t("p",[_._v("表字段：")]),_._v(" "),t("ul",[t("li",[_._v("ID：唯一标识某个玩家正在进行的某个任务")]),_._v(" "),t("li",[_._v("Uid：玩家的 id")]),_._v(" "),t("li",[_._v("Tid：任务 id，就是策划配置表里对应的任务 id")]),_._v(" "),t("li",[_._v("Status：任务的状态——未解锁0、已解锁1、正在进行中2、任务完成3、任务完成奖励待领取4、任务完成奖励已领取5")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("ID")]),_._v(" "),t("th",[_._v("Uid")]),_._v(" "),t("th",[_._v("Tid")]),_._v(" "),t("th",[_._v("Status")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("玩家A")]),_._v(" "),t("td",[_._v("10001")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("玩家A")]),_._v(" "),t("td",[_._v("20001")]),_._v(" "),t("td",[_._v("2")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("玩家B")]),_._v(" "),t("td",[_._v("10001")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("玩家B")]),_._v(" "),t("td",[_._v("20002")]),_._v(" "),t("td",[_._v("2")])])])]),_._v(" "),t("p",[_._v("任务管理模块：")]),_._v(" "),t("ul",[t("li",[_._v("任务触发：对某些事件感兴趣\n"),t("ul",[t("li",[_._v("玩家升级——>抛出事件——>任务系统监听事件——>检查游戏玩家数据(有已经完成或者开启的任务)——>遍历规则表，看哪些任务达成了条件并且是原本没有的新任务，如果有新任务就插入到玩家任务表")])])]),_._v(" "),t("li",[_._v("任务达成：对某些类型的事件做判定\n"),t("ul",[t("li",[_._v("抛出某个事件——>任务系统监听事件——>遍历玩家正在进行的任务——>根据任务的完成条件规则表改变任务状态")])])])]),_._v(" "),t("h2",{attrs:{id:"_4-任务奖励的领取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-任务奖励的领取"}},[_._v("#")]),_._v(" 4. 任务奖励的领取")]),_._v(" "),t("ul",[t("li",[_._v("任务奖励\n"),t("ul",[t("li",[_._v("直接发放：直接发放奖励，如果是网络游戏就顺便通知一下客户端")]),_._v(" "),t("li",[_._v('需要主动领取：任务完成时状态改为"任务完成奖励待领取4"，需要用户拉取待领取奖励任务列表，点击领取之后发放奖励并修改任务状态（领取——>任务id——>任务奖励内容——>直接给玩家加上对应数据）')])])])])])}),[],!1,null,null,null);v.default=l.exports}}]);