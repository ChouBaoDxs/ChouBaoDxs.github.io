(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{1008:function(s,e,a){"use strict";a.r(e);var n=a(12),r=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("a",{attrs:{href:"https://jumpserver.readthedocs.io/zh/master/dockerinstall.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方安装文档"),a("OutboundLink")],1),s._v("只写了All in one Docker启动，没写docker-compose，这里记一下"),a("br"),s._v("\n官方的docker-compose地址：https://github.com/wojiushixiaobai/docker-compose")])]),s._v(" "),a("p",[s._v("[TOC]")]),s._v(" "),a("h2",{attrs:{id:"ubuntu通过docker-compose安装jumpserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu通过docker-compose安装jumpserver"}},[s._v("#")]),s._v(" ubuntu通过docker-compose安装jumpserver：")]),s._v(" "),a("h3",{attrs:{id:"_1-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装docker"}},[s._v("#")]),s._v(" 1. 安装docker")]),s._v(" "),a("p",[s._v("官方文档：https://docs.docker.com/install/linux/docker-ce/ubuntu/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo apt-get update\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\nsudo apt-key fingerprint 0EBFCD88\nsudo add-apt-repository \\\n   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable"\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"_2-安装docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装docker-compose"}},[s._v("#")]),s._v(" 2. 安装docker-compose")]),s._v(" "),a("p",[s._v("官方文档：https://docs.docker.com/compose/install/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo curl -L "https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-开始配置jumpserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-开始配置jumpserver"}},[s._v("#")]),s._v(" 3. 开始配置jumpserver")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd ~\ngit clone https://github.com/wojiushixiaobai/docker-compose.git jumpserver-docker-compose\ncd jumpserver-docker-compose\nvim docker-compose.yaml\n  # 按需求修改配置：这里我把nginx的端口映射改成了81:80，因为宿主机的80已经被以前安装的nginx占了\n  # 注意：给出现的布尔型环境变量都加上引号表示其是个字符串，否则会报错\nvim .env\n  # 修改好MYSQL_ROOT_PASSWORD、SECRET_KEY、BOOTSTRAP_TOKEN\nsudo docker-compose up\n# 没问题的话，就后台启动\nsudo docker-compose up -d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"_4-配置宿主机nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置宿主机nginx"}},[s._v("#")]),s._v(" 4. 配置宿主机nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo vim /etc/nginx/sites-enabled/jumpserver.conf\n\nserver {\n    listen 80;\n    server_name jmp.xxx.com;\n\n    location / {\n        proxy_pass http://127.0.0.1:81;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "upgrade";\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n\nsudo nginx -t\nsudo nginx -s reload\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h3",{attrs:{id:"_5-配置jumpserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置jumpserver"}},[s._v("#")]),s._v(" 5. 配置jumpserver")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("登录：http://jmp.xxx.com 一开始账号密码都是admin，先修改一下密码\n然后就是配置：\n  用户管理：用户组\n  资产管理：管理用户、系统用户、资产列表(新建节点+配机器)\n  权限管理：资产授权\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);